<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h2>AJAX基本语法创建对象与请求（Request）</h2>
<button type="button" onclick="loadXMLDoc()">请求数据</button>
<div id="myDiv">暂无数据</div>
<script>
    function loadXMLDoc() {
        var xmlhttp;
        if(window.XMLHttpRequest){//创建 XMLHttpRequest 对象,用于在后台与服务器交换数据，即可在不重新加载网页的情况下，对网页局部更新
            xmlhttp=new XMLHttpRequest();
        }else{
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");//老版本的 Internet Explorer （IE5 和 IE6）使用 ActiveX 对象
        }
        xmlhttp.onreadystatechange=function(){//当请求被发送到服务器时，我们需要执行一些基于响应的任务
            if(xmlhttp.readyState==0){
                document.getElementById("myDiv").innerHTML="请求未初始化";
            }else if (xmlhttp.readyState==4 && xmlhttp.status==200){
            /*readyState存有 XMLHttpRequest 的状态。从 0 到 4 发生变化。
            * 0: 请求未初始化
              1: 服务器连接已建立
              2: 请求已接收
              3: 请求处理中
              4: 请求已完成，且响应已就绪
             注释：onreadystatechange 事件被触发 5 次（0 - 4），对应着 readyState 的每个变化
             status
              200: "OK"
              404: 未找到页面
              当 readyState 等于 4 且状态为 200 时，表示响应已就绪*/
                document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
            }
        }
        xmlhttp.open("GET","test1.txt",true);
        /*url 参数是服务器上文件的地址,该文件可以是任何类型的文件，比如 .txt 和 .xml，或者服务器脚本文件，比如 .asp 和 .php （在传回响应之前，能够在服务器上执行任务）
        XMLHttpRequest 对象如果要用于 AJAX 的话，其 open() 方法的 async 参数必须设置为 true，当使用 async=true 时，请规定在响应处于 onreadystatechange 事件中的就绪状态时执行的函数
        即 xmlhttp.onreadystatechange=function(){ ... }
        注释：当您使用 async=false 时，请不要编写 onreadystatechange 函数 - 把代码放到 send() 语句后面即可，即：
        xmlhttp.open("GET","test1.txt",false);
        xmlhttp.send();
        document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
        在以下情况中，请使用 POST 请求：
        1.无法使用缓存文件（更新服务器上的文件或数据库）
        2.向服务器发送大量数据（POST 没有数据量限制）
        3.发送包含未知字符的用户输入时，POST 比 GET 更稳定也更可靠*/
        xmlhttp.send();
    }
</script>
</body>
</html>